<mat-card>
  <div class="container">
  <div class="row">
    <a [routerLink]="['/']" class="col-12 col-md-6">
      <button mat-flat-button class="info-button">
        Back to Gallery
      </button>
    </a>
    <div *ngIf="isAdmin()"  class="col-12 col-md-6">
    <button mat-flat-button class="delete-button" (click)="delete()">Delete image</button>
    </div>
  </div>
  </div>
  <ng-template [ngIf]="isLoaded" ; [ngIfElse]="loading"  class="container">
    <div class="form-container row">
      <div class="col-12 col-md-6 align-items-center">
      <img class="image" [src]="(photo | imageSrc)" alt="photo.name" />
    </div>
      <div class="col-12 col-md-6">
        <form (ngSubmit)="edit()" class="container">
          <div class="form-container row" [formGroup]="editForm" fxLayout="column">
            <mat-form-field class="col-12" >
              <input matInput placeholder="Name" [value]="photo.name | titlecase" formControlName="name" />
            </mat-form-field>
            <mat-form-field class="col-12">
              <textarea matInput placeholder="Description..." [value]="photo.description" formControlName="description">
               </textarea>
            </mat-form-field>
            <mat-form-field class="col-12">
              <mat-label>Catalogs</mat-label>
              <mat-select multiple formControlName="catalogs" class="col-12">
                <mat-option *ngFor="let catalog of catalogList" [value]="catalog">
                  {{catalog}}</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field class="col-12">
              <mat-chip-list #chipList aria-label="Tags selection">
                <mat-chip *ngFor="let tag of tagList; let i = index;" [selectable]="selectable" [removable]="removable"
                  (removed)="removeTag(i)">
                  {{tag}}
                  <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input placeholder="New tag..." [matChipInputFor]="chipList"
                  [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="addOnBlur"
                  (matChipInputTokenEnd)="addTag($event)" />
              </mat-chip-list>
            </mat-form-field>
          <button mat-flat-button class="info-button" type="submit">Save changes</button>
        </div>
        </form>
      </div>
    </div>
  </ng-template>
</mat-card>
<ng-template #loading>
  <mat-spinner></mat-spinner>
</ng-template>
